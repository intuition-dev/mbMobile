// mB v5.07.08 on 2019-06-17T15:58:09.088Z
class BindFeed{constructor(){this.service=new ApiService(window.API),this.articles=[],this.totalResults=0,this.alreadyLoaded=0,this.page=1}read(){var e=this
return this.service.getFeedData(this.page).then(function(e){return{articles:e.articles.map(function(e){let t=e
var i=luxon.DateTime.fromISO(e.publishedAt)
return t.date=i.toLocaleString(),t}),totalResults:e.totalResults}}).then(function(t){var i=t.articles
e.totalResults=t.totalResults,e.articles.push(...i),e.alreadyLoaded=e.articles.length})}getViewList(){var e=this
return Promise.all([this.read()]).then(function(){for(var t="",i=0;i<e.articles.length;i++)t+='<div id="feeditem-comp_'+i+'"></div>'
$("#feedList").html(t),e.articles.map(function(e,t){riot.mount("#feeditem-comp_"+t,"feeditem-comp",{title:e.title,index:t,feedId:e.id,description:e.description,author:e.author,showMore:!0,urlToImage:e.urlToImage,publishedAt:e.date,source:e.source.name,url:e.url})[0]})})}getFeedItem(e){var t=this
return Promise.all([this.read()]).then(function(){var i=t.articles.filter(function(t){return t.id==e&&t})[0]
void 0!==i&&Object.keys(i).length?riot.mount("#feedItem","feeditem-comp",{title:i.title,feedId:i.id,author:i.author,goBack:!0,urlToImage:i.urlToImage,content:i.content,publishedAt:i.date,source:i.source.name,url:i.url}):window.location.href="/screen/feed/index.html"})}}